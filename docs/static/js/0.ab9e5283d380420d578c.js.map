{"version":3,"sources":["webpack:///src/pages/home/index.vue","webpack:///./src/pages/home/index.vue?2aa1","webpack:///./src/pages/home/index.vue"],"names":["home","name","data","imgSrc","url","marginTop","photoNum","infoList","flag","methods","loadImage","e","this","length","shift","addList","num","scrollTop","document","documentElement","Math","floor","parseInt","split","push","calcUrl","handleScroll","mounted","window","addEventListener","$refs","clientHeight","pages_home","render","_h","$createElement","_c","_self","staticClass","attrs","id","ref","src","alt","on","load","_v","style","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0HAUA,IAAAA,GACAC,KAAA,QACAC,KAFA,WAGA,OACAC,OAAA,+BACAC,IAAA,gBACAC,UAAA,QACAC,SAAA,EACAC,YACAC,MAAA,IAGAC,SAEAC,UAFA,SAEAC,GACAC,KAAAL,SAAAM,QAEAD,KAAAT,OAAAS,KAAAL,SAAA,GACAK,KAAAL,SAAAO,QACAF,KAAAJ,MAAA,GAEAI,KAAAJ,MAAA,GAIAO,QAbA,WAcA,IACAC,EADAC,EAAAC,SAAAC,gBAAAF,WAGAD,EAAAI,KAAAC,MAAAJ,GAAAK,SAAAV,KAAAP,UAAAkB,MAAA,mBACAX,KAAAN,WACAM,KAAAN,SAAAU,EACAJ,KAAAL,SAAAiB,KAAAZ,KAAAa,QAAAT,MAIAS,QAxBA,SAwBAT,GACA,OAAAA,EAAA,GACAJ,KAAAR,IAAA,aAAAY,EAAA,OACAA,EAAA,IACAJ,KAAAR,IAAA,YAAAY,EAAA,OAEAJ,KAAAR,IAAA,WAAAY,EAAA,QAGAU,aAjCA,SAiCAf,GACAC,KAAAG,WACA,IAAAH,KAAAJ,MAAAI,KAAAF,cAwBAiB,QAvEA,WAwEAC,OAAAC,iBAAA,SAAAjB,KAAAc,cAAA,GACAd,KAAAP,UAAA,EAAAO,KAAAkB,MAAA,MAAAC,aAAA,OChFeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbtB,KAAauB,eAA0BC,EAAvCxB,KAAuCyB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,OAAAC,OAA0BC,GAAA,UAAaJ,EAAA,OAAYK,IAAA,QAAAH,YAAA,UAAgCF,EAAA,OAAYK,IAAA,MAAAH,YAAA,MAAAC,OAAmCG,IAAlN9B,KAAkNT,OAAAwC,IAAA,IAA0BC,IAAKC,KAAjPjC,KAAiPF,aAAjPE,KAAuQkC,GAAA,KAAAV,EAAA,OAAwBE,YAAA,UAAAS,OAA8B1C,UAA7TO,KAA6TP,kBAEtU2C,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEnD,EACAgC,GATF,EAVA,SAAAoB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/0.ab9e5283d380420d578c.js","sourcesContent":["<template>\n  <div class=\"home\" id=\"main\">\n    <div class=\"video\" ref=\"video\">\n      <img class=\"img\" ref=\"img\" :src=\"imgSrc\" @load=\"loadImage\" alt=\"\">\n      <div class=\"wrapper\" :style=\"{'marginTop': marginTop}\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'index',\n  data () {\n    return {\n      imgSrc: `/static/video/video_0001.jpg`,\n      url: '/static/video',\n      marginTop: '500px', // 滚动条总距离\n      photoNum: 1, // 图片数缓存\n      infoList: [], // 渲染队列\n      flag: true// 开关\n    }\n  },\n  methods: {\n    // 图片渲染\n    loadImage (e) {\n      if (this.infoList.length) {\n        // let video = this.$refs['img']\n        this.imgSrc = this.infoList[0]\n        this.infoList.shift()\n        this.flag = true\n      } else {\n        this.flag = false\n      }\n    },\n    // 队列添加\n    addList () {\n      let scrollTop = document.documentElement.scrollTop\n      let num\n      // 图片数\n      num = Math.floor(scrollTop / (parseInt(this.marginTop.split('px')[0]) / 190))\n      if (num !== this.photoNum) {\n        this.photoNum = num\n        this.infoList.push(this.calcUrl(num))\n      }\n    },\n    // 地址填充\n    calcUrl (num) {\n      if (num < 10) {\n        return `${this.url}/video_000${num}.jpg`\n      } else if (num < 100) {\n        return `${this.url}/video_00${num}.jpg`\n      } else {\n        return `${this.url}/video_0${num}.jpg`\n      }\n    },\n    handleScroll (e) {\n      this.addList()\n      this.flag === false ? this.loadImage() : ''\n    }\n    // 节流\n    // throttle (fun, delay, time) {\n    //   var timeout,\n    //     startTime = new Date()\n    //\n    //   return  ()=> {\n    //     var context = this,\n    //       args = arguments,\n    //       curTime = new Date()\n    //\n    //     clearTimeout(timeout)\n    //     // 如果达到了规定的触发时间间隔，触发 handler\n    //     if (curTime - startTime >= time) {\n    //       fun.apply(context, args)\n    //       startTime = curTime\n    //       // 没达到触发间隔，重新设定定时器\n    //     } else {\n    //       timeout = setTimeout(fun, delay)\n    //     }\n    //   }\n    // }\n  },\n  mounted () {\n    window.addEventListener('scroll', this.handleScroll, true)\n    this.marginTop = this.$refs['video'].clientHeight * 3 + 'px'\n    // var images = new Array()\n    // for (let i = 0, len = 191; i < len; i++) {\n    //   images[i] = new Image()\n    //   images[i].src = this.calcUrl(i)\n    // }\n  }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .video{\n    height: 100%;\n    >img{\n      display: block;\n     width: 100%;\n      height: 100%;\n      position: fixed;\n      left: 0;\n      z-index: 0;\n      top: 0px;\n    }\n  }\n  .wrapper{\n    height: 1px;\n    background: #d2b8b800;\n    z-index: 900;\n    position: relative;\n    padding-top: 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/home/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\",attrs:{\"id\":\"main\"}},[_c('div',{ref:\"video\",staticClass:\"video\"},[_c('img',{ref:\"img\",staticClass:\"img\",attrs:{\"src\":_vm.imgSrc,\"alt\":\"\"},on:{\"load\":_vm.loadImage}}),_vm._v(\" \"),_c('div',{staticClass:\"wrapper\",style:({'marginTop': _vm.marginTop})})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-e5ef3ca2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/home/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e5ef3ca2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e5ef3ca2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e5ef3ca2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/home/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}